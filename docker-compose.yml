version: '3.8'
services:
  django:
    build:
      context: .
      dockerfile: Dockerfile.django
    ports:
      - '8000:8000'
    environment:
      - DEBUG=True
      - DJANGO_SECRET_KEY=${DJANGO_SECRET_KEY:-django-insecure-dev-key}
      - USE_POSTGRES=false
      - ALLOWED_HOSTS=*
    volumes:
      - ./backend:/app
    command: python manage.py runserver 0.0.0.0:8000

  # Optional: PostgreSQL database (not used by default, SQLite is default)
  # Uncomment and set USE_POSTGRES=true in django service to use
  # postgres:
  #   image: postgres:15-alpine
  #   environment:
  #     POSTGRES_USER: dp
  #     POSTGRES_PASSWORD: dp
  #     POSTGRES_DB: dawg
  #   ports:
  #     - '5432:5432'
  #   volumes:
  #     - postgres_data:/var/lib/postgresql/data

# volumes:
#   postgres_data:
